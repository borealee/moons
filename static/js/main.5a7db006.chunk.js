(this["webpackJsonpmoon-calc"]=this["webpackJsonpmoon-calc"]||[]).push([[0],{143:function(t,e,a){t.exports=a(196)},148:function(t,e,a){},149:function(t,e,a){t.exports=a.p+"static/media/logo.ee7cd8ed.svg"},150:function(t,e,a){},196:function(t,e,a){"use strict";a.r(e);var n=a(0),o=a.n(n),i=a(13),s=a.n(i),r=(a(148),a(30)),c=a(31),m=a(34),p=a(33),u=(a(149),a(150),a(47)),l=a(124),d=a(231),f=a(234),b=a(236),v=a(240),h=a(238),O=a(119),g=a.n(O),j=a(235),T=a(244),E=a(241),y=a(15),k=a(243),P=a(123),S=a(228),L=a(229),D=a(225),M=a(125),I=a(230),A=a(226),w=(a(227),function(t){var e=t.map((function(t){return"string"==typeof t.time?Object(D.a)(t.time):Object(D.a)(t.time.toISOString())}));return Object(A.a)(e)}),x=function(t,e){localStorage.setItem(t,JSON.stringify(e))},C=(a(151),function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){return Object(r.a)(this,a),e.call(this,t)}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(t,e,a){}},{key:"render",value:function(){var t=this,e=new Date,a=0,n=0,i="Invalid timestamps";return this.props.timestamps.length>0&&(a=Object(S.a)(w(this.props.timestamps),this.props.timeToPop),n=Object(L.a)(a,Object(D.a)(e.toISOString())),i="".concat(Object(M.a)(Object(I.a)(a,a.getTimezoneOffset()),"yyyy-MM-dd HH:mm")," (in \xb1").concat(n," hrs)")),o.a.createElement("div",{style:{display:"block",padding:"24px",width:"100%"}},o.a.createElement(d.a,{variant:"h6"},"Moon pops: ",this.props.timestampsFuckedUp?"Fucked up timestamps":i),o.a.createElement(T.a,{value:this.props.notes,fullWidth:!0,style:{marginTop:"16px",marginBottom:"16px"},name:"notes",onChange:this.props.updateMoonData,label:"Notes",rows:4,variant:"outlined",multiline:!0}),o.a.createElement(d.a,{style:{display:"inline"}},"Bookmarks"),o.a.createElement(j.a,{onClick:this.props.clearAllBookmarks,style:{float:"right",display:"inline"}},"Clear all"),o.a.createElement(d.a,{style:{marginTop:"8px",marginBottom:"8px"}},this.props.timestampsFuckedUp?"Bro timestamps are fucked":null),o.a.createElement(f.a,{dense:!0},this.props.timestamps.map((function(e){return o.a.createElement(b.a,{key:e.id,style:{marginTop:"8px"}},o.a.createElement("div",{style:{minWidth:"250px"}},o.a.createElement(y.a,{utils:P.a},o.a.createElement(k.a,{emptyLabel:"",label:"Date (use evetime dipshit)",value:e.time,ampm:!1,fullWidth:!0,disableFuture:!0,onChange:function(a){return t.props.updateTimstampDate(e.id,a)}}))),o.a.createElement(T.a,{label:"Distance to pop (km)",variant:"outlined",style:{marginLeft:"8px"},name:"distanceToPop",error:isNaN(e.distanceToPop)?"Are you fucking retarded?":null,helperText:isNaN(e.distanceToPop)?"Are you fucking retarded?":null,value:e.distanceToPop,onChange:function(a){return t.props.updateTimestamp(e.id,a)}}),o.a.createElement(v.a,null,o.a.createElement(h.a,{edge:"end","aria-label":"delete",onClick:function(){return t.props.removeTimestamp(e.id)}},o.a.createElement(g.a,null))))}))),o.a.createElement(E.a,null),o.a.createElement(j.a,{onClick:this.props.addTimestamp,style:{marginTop:"8px"},disableElevation:!0,variant:"contained",color:"primary"},"Add bookmark"))}}]),a}(n.Component)),N=a(14),B=a(91),U=a(118),F=a(246),W=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;Object(r.a)(this,a),(n=e.call(this,t)).recalculate=function(){},n.validateTimestamps=function(t){var e=!1;for(var a=Object(l.a)(t.map((function(t){return"string"==typeof t.time?Object(u.a)(Object(u.a)({},t),{},{time:Object(D.a)(t.time),distanceToPop:parseInt(t.distanceToPop,10)}):Object(u.a)(Object(u.a)({},t),{},{distanceToPop:parseInt(t.distanceToPop,10)})}))).sort((function(t,e){return t.distanceToPop<e.distanceToPop?-1:t.distanceToPop>e.distanceToPop?1:0})),o=0;o<a.length-1;o++)Object(B.a)(a[o].time,a[o+1].time)||(e=!0);n.setState((function(t){t.fuckedUp=e}),(function(){return x(n.props.moonId,n.state)})),console.log("sorted: ",a)},n.addTimestamp=function(){var t=new Date,e=Object(I.a)(t,t.getTimezoneOffset());n.setState(Object(N.a)((function(t){t.timestamps.push({id:Object(F.a)(),time:e.toISOString(),distanceToPop:0})})),(function(){var t=n.calculateTimeToPop(n.state.timestamps);n.setState(Object(N.a)((function(e){e.timeToPop=t,e.popsAt=new Date})));var e=Object(S.a)(w(n.state.timestamps),t);n._updateParentEstimate(e),x(n.props.moonId,n.state),n.validateTimestamps(n.state.timestamps)}))},n.updateTimstampDate=function(t,e){n.setState(Object(N.a)((function(a){a.timestamps.find((function(e){return e.id===t})).time=e.toISOString()})),(function(){var t=n.calculateTimeToPop(n.state.timestamps);n.setState(Object(N.a)((function(e){e.timeToPop=t,e.popsAt=new Date})));var e=Object(S.a)(w(n.state.timestamps),t);n._updateParentEstimate(e),x(n.props.moonId,n.state),n.validateTimestamps(n.state.timestamps)}))},n._updateParentEstimate=function(t){n.props.updateMoonParent(n.props.moonId,{persist:function(){},target:{name:"popsAt",value:t}})},n.updateMoonData=function(t){t.persist(),n.setState(Object(N.a)((function(e){return e[t.target.name]=t.target.value}),(function(){x(n.props.moonId,n.state)})))},n.updateTimestamp=function(t,e){e.persist(),n.setState(Object(N.a)((function(a){a.timestamps.find((function(e){return e.id===t}))[e.target.name]=e.target.value})),(function(){var t=n.calculateTimeToPop(n.state.timestamps);n.setState(Object(N.a)((function(e){e.timeToPop=t,e.popsAt=new Date}))),x(n.props.moonId,n.state);var e=Object(S.a)(w(n.state.timestamps),t);n._updateParentEstimate(e),n.validateTimestamps(n.state.timestamps)}))},n.removeTimestamp=function(t){n.setState(Object(N.a)((function(e){e.timestamps=e.timestamps.filter((function(e){return e.id!==t}))})),(function(){var t=n.calculateTimeToPop(n.state.timestamps);n.setState(Object(N.a)((function(e){e.timeToPop=t,e.popsAt=new Date}))),x(n.props.moonId,n.state);var e=Object(S.a)(w(n.state.timestamps),t);n._updateParentEstimate(e),n.validateTimestamps(n.state.timestamps)}))},n.clearAllBookmarks=function(){n.setState(Object(N.a)((function(t){t.timestamps=[]})),(function(){n.setState(Object(N.a)((function(t){t.timeToPop=0,t.popsAt=new Date}))),x(n.props.moonId,n.state);n._updateParentEstimate(new Date)}))},n.calculateSpeed=function(t,e){var a=t.time,n=e.time;"string"==typeof a&&(a=Object(D.a)(t.time)),"string"==typeof n&&(n=Object(D.a)(e.time));var o=Object(L.a)(a,n),i=Math.abs(t.distanceToPop-e.distanceToPop)/Math.abs(o);return console.log(a,n),i},n.calculateTimeToPop=function(t){if(0==t.length)return 0;var e=w(t),a=t.findIndex((function(t){return t.time,Object(U.a)(Object(D.a)(t.time),e)})),o=[],i=0;if(t.length>=2){for(var s=0;s<t.length-1;s++)o.push(n.calculateSpeed(t[s],t[s+1]));var r=o.reduce((function(t,e){return t+e}))/(t.length-1);i=t[a].distanceToPop/r}return isNaN(i)?0:i.toString().match(/^-?\d+(?:\.\d{0,2})?/)[0]};var o=new Date;Object(I.a)(o,o.getTimezoneOffset());return n.state={chunkToPopDistance:0,chunkSpeed:0,timeToPop:0,popsAt:new Date,popDistance:200,fuckedUp:!1,notes:"",timestamps:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=localStorage.getItem(this.props.moonId);if(null!==t){var e=JSON.parse(t);this.setState(Object(N.a)((function(t){return e})),(function(){}))}}},{key:"render",value:function(){return o.a.createElement(C,{moonName:this.props.moonName,moonId:this.props.moonId,notes:this.state.notes,updateMoonData:this.updateMoonData,timestampsFuckedUp:this.state.fuckedUp,addTimestamp:this.addTimestamp,updateTimestamp:this.updateTimestamp,updateTimstampDate:this.updateTimstampDate,removeTimestamp:this.removeTimestamp,clearAllBookmarks:this.clearAllBookmarks,chunkSpeed:this.state.chunkSpeed,popsAt:this.state.popsAt,timeToPop:this.state.timeToPop,timestamps:this.state.timestamps})}}]),a}(n.Component),_=a(242),z=a(120),H=a.n(z),J=a(122),R=a.n(J),$=a(121),q=a.n($),G=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).openMoon=function(t){n.setState(Object(N.a)((function(e){e.moonList.find((function(e){return e.id===t})).open=!n.state.moonList.find((function(e){return e.id===t})).open})),(function(){return x("moonList",n.state.moonList)}))},n.addMoon=function(){n.setState(Object(N.a)((function(t){t.moonList.push({id:Object(F.a)(),name:"New moon"})})),(function(){return x("moonList",n.state.moonList)}))},n.updateMoon=function(t,e){e.persist(),console.log("updating moon: ",e),n.setState(Object(N.a)((function(a){"popsAt"==e.target.name?a.moonList.find((function(e){return e.id===t}))[e.target.name]=Object(M.a)(Object(I.a)(e.target.value,e.target.value.getTimezoneOffset()),"yyyy-MM-dd HH:mm"):a.moonList.find((function(e){return e.id===t}))[e.target.name]=e.target.value})),(function(){return x("moonList",n.state.moonList)}))},n.removeMoon=function(t){n.setState(Object(N.a)((function(e){e.moonList=n.state.moonList.filter((function(e){return e.id!==t}))})),(function(){return x("moonList",n.state.moonList)}))},n.minimizeAll=function(){console.log("setting"),n.setState(Object(N.a)((function(t){t.moonList=n.state.moonList.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{open:!1})}))}),(function(){return x("moonList",n.state.moonList)})))},n.open=!1,n.state={moonList:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var t=JSON.parse(localStorage.getItem("moonList"));null!==t&&this.setState(Object(N.a)((function(e){e.moonList=t})))}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{style:{paddingRight:16}},o.a.createElement(d.a,{variant:"h6"},"Moons"),o.a.createElement(f.a,null,this.state.moonList.map((function(e){return console.log("Moon: ",e),o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement(b.a,{style:{display:"block",margin:"8px 0 0 0"}},o.a.createElement(T.a,{value:e.name,name:"name",onChange:function(a){return t.updateMoon(e.id,a)}}),o.a.createElement(j.a,{variant:"contained",color:"secondary",disableElevation:!0,style:{marginLeft:16},onClick:function(a){return t.removeMoon(e.id)}},"DELETE"),o.a.createElement(d.a,{style:{display:"inline",marginLeft:16}},"Pops: ",e.popsAt),o.a.createElement(H.a,null,o.a.createElement(h.a,{edge:"end",onClick:function(){return t.openMoon(e.id)}},e.open?o.a.createElement(q.a,null):o.a.createElement(R.a,null)))),o.a.createElement(_.a,{in:e.open,timeout:"auto",unmountOnExit:!0},o.a.createElement(f.a,{component:"div"},o.a.createElement(b.a,null,o.a.createElement(W,{moonName:e.name,moonId:e.id,updateMoonParent:t.updateMoon,moonData:e.data})))),o.a.createElement(E.a,null))}))),o.a.createElement(j.a,{onClick:this.addMoon,variant:"outlined",style:{marginTop:16},fullWidth:!0,color:"primary"}," Add moon "))}}]),a}(n.Component),K=a(239),Q=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(d.a,{variant:"h6"},"Help"),o.a.createElement("div",{style:{textAlign:"left",paddingLeft:16}},o.a.createElement("span",null,"1. ")))}}]),a}(n.Component),V=function(t){Object(m.a)(a,t);var e=Object(p.a)(a);function a(){return Object(r.a)(this,a),e.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement(K.a,{container:!0},o.a.createElement(K.a,{item:!0,xs:6},o.a.createElement(G,null)),o.a.createElement(K.a,{item:!0,xs:6},o.a.createElement(Q,null)))))}}]),a}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[143,1,2]]]);
//# sourceMappingURL=main.5a7db006.chunk.js.map